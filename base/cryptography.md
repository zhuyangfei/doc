# cryptography

## 工具
- 对称密码：解密密钥与加密密钥是一样的；
- 非对称密码（公钥密码）：解密密钥与加密密钥不是一样的；
- 散列值: 用于确保内容完整性；
- 消息认证码：用于保证内容完整性，同时，确认认证机制，即消息是否来自期望对象；
- 数字签名：能够保证内容完整性，认证及否认机制；
- 伪随机数生成器

## 密钥算法
- XOR
- AES

## 分组密码（block cipher）
每次只能处理特定长度的一块数据的一类密码算法；

### 模式
- ECB（electronic codeBook）
  对明文进行分组，然后，独立加密与解密；相同的明文block，会加密出一样密文，因此，容易看出明文的规律；
  通过调换密文顺序，就能实现攻击；
- CBC（cipher block chain）
- CFB（cipher feedback）密文反馈模式
  前一块明文加密输出，作为加密算法输入，然后，与后一块明文进行XOR；可以并行执行；
- OFB（output-feedback）
  IV经加密输出，作为加密算法输入，然后，与明文进行XOR；可以并行执行；
- CTR（CounTeR）计数器模式
  
## 公钥密码
用于解决使用对称密钥时，密钥配送的问题；
- 如何解决
  接受者持有解密密钥，并经把加密密钥发给发送者；发送者，使用该加密密钥进行加密；
- public key
  加密密钥，可以公开，所以，称public；
- private key
  加密密钥，不公开，所以，称private；
public key 与 private key一对一；

### 缺点
在同等机密程度下，公钥密码处理速度与对称密码的几百分之一；

### RSA算法

### 公钥认证
为了解决公钥密码的“中间人"工具，通过公钥认证明确公钥是否来自指定的接收者；

## 认证

### 单向散列函数
验证内容完整性，确保不被篡改；
- 特点：
1. 输出固定长度的散列值；
2. 快速计算散列值；
3. 消息不同，输出的散列值不一样；
4. 单向性，即无法通过散列值推出消息；

- 算法
1. MD5
2. SHA-2(SHA-256,SHA-384,SHA-512)
3. SHA-3
  可以输出任意长度hash值； 

### 消息认证码（Message Authentication Code, MAC）
与对称密钥相关联的单向散列函数；
- 案例
1. SWIFT
2. IPsec；
3. SSL/TLS；

#### 认证加密
GCM、GMAC，HMAC

## 数字签名
只能自己能生成的一串数字；
两种行为：
- 生成签名消息
  使用签名密钥，只能是签名人持有；
- 验证签名消息
  使用严重密钥，任何需要验证的人都可持有；
签名的两种方法：
1. 对消息签名
2. 对消息散列值签名
   
### 使用场景
1. 公钥证书
2. 漏洞发布者，所带身份信息（签名）

### 工具算法
- RSA
  公钥：{E，N}，私钥：{D, N}
  签名 = 消息 D mod N， 消息 = 签名 E mod N；
- EIGamal
- DSA
- ECDSA
- Rabin
  
## 证书
为公钥加上数字签名；

## 密钥
### 密钥长度
密钥空间：即所有密钥的集合；密钥空间大小很重要；

### 用途分类
- 确保机密性的密钥：对称密码及公钥密码
- 用于认证的密钥：消息认证码及数字签名

### 使用次数分类 
- 会话密钥：单次有效；
- 主密钥：一直有效；
  
### 加密对象
- KEK：对加密密钥进行加密的密钥，主密钥，作为KEK
- CEK：对内容加密的密钥，通常会话密钥，作为CEK
KEK，可以减少需要保存的CEK的数量；
  
### 密钥生成
通过伪随机数生成器

### 密钥配送问题
密钥配送问题解决：
1. 公钥，私钥
2. 配送中心
3. 密钥协商算法

### 口令密码， PBE
- salt（燕）
KEK = hash(password + salt);

### 随机数
- 种子：用于初始化伪随机算法（伪随机生成器）的内部状态；

#### 算法
1. 线性同余法
   没有不可预测性，不能用于密码技术中的随机数；
2. 单向散列函数
3. xxx
   











